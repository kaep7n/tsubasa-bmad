# Story 3.4: Create Training Session (Manual)

## Status
Ready

## Assigned To
James (Dev Agent)

## Story
**As a** coach,
**I want** to create a training session manually,
**so that** I can schedule ad-hoc or recurring sessions

## Acceptance Criteria
1. ✅ `CreateTrainingSessionComponent` created with form
2. ✅ Form fields: Template (dropdown), Date, Time, Duration, Location, Notes
3. ✅ Template selection: Auto-fill duration and location from template
4. ✅ On submit: Insert session, save to IndexedDB, navigate to detail
5. ✅ Offline handling: Form submission works offline
6. ✅ Error handling: Network failures, validation errors
7. ✅ Loading state: Disable form during submission
8. ✅ Cancel button
9. ✅ Unit test: Validation and submission logic
10. ✅ E2E test: Create session, verify saved

## Tasks / Subtasks

- [ ] **Task 1: Generate CreateTrainingSessionComponent** (AC: 1)
  - [ ] Run: `ng generate component features/training/pages/training-form`
  - [ ] Add route: `/training/new`

- [ ] **Task 2: Build Form** (AC: 2)
  - [ ] Reactive form with all fields
  - [ ] Validators: date required, time required, duration > 0

- [ ] **Task 3: Template Auto-fill** (AC: 3)
  - [ ] Load templates dropdown
  - [ ] On template select, populate duration and location
  - [ ] Allow manual override

- [ ] **Task 4: Implement Submission** (AC: 4)
  - [ ] Generate UUID for session
  - [ ] Insert to Supabase
  - [ ] Save to IndexedDB
  - [ ] Navigate to `/training/:id`

- [ ] **Task 5: Offline Handling** (AC: 5, 6, 7)
  - [ ] Check network status
  - [ ] Queue operation if offline
  - [ ] Error handling with retry
  - [ ] Loading state

- [ ] **Task 6: Cancel Button** (AC: 8)
  - [ ] Navigate back with dirty check

- [ ] **Task 7: Write Tests** (AC: 9, 10)
  - [ ] Unit test form logic
  - [ ] E2E test create session

## Dev Notes

Component location: `/src/app/features/training/pages/training-form/`

Will be reused for edit mode (Story 3.8)
[Source: PRD Epic 3 Story 3.4]

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-10-24 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
_To be populated by Dev Agent_

### Debug Log References
_To be populated by Dev Agent_

### Completion Notes List
_To be populated by Dev Agent_

### File List
_To be populated by Dev Agent_

## QA Results
_To be populated by QA Agent_
