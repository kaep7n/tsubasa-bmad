# Story 3.8: Edit Training Session

## Status
Ready

## Assigned To
James (Dev Agent)

## Story
**As a** coach,
**I want** to edit training session details,
**so that** I can correct mistakes or update information

## Acceptance Criteria
1. ✅ "Edit Session" button on training session detail screen
2. ✅ `EditTrainingSessionComponent` created (reuses form from CreateTrainingSessionComponent)
3. ✅ Form pre-populated with existing session data
4. ✅ On submit: Update session, navigate back, show toast
5. ✅ Offline handling: Form submission works offline
6. ✅ Cancel button: Navigate back without saving
7. ✅ Unit test: Verify update logic
8. ✅ E2E test: Edit session, verify changes saved

## Tasks / Subtasks

- [x] **Task 1: Add Edit Button** (AC: 1)
  - [x] Add edit button to training detail screen
  - [x] Navigate to `/training/:id/edit`

- [x] **Task 2: Setup Edit Mode in TrainingFormComponent** (AC: 2, 3)
  - [x] Detect edit mode from route params
  - [x] Load existing session data
  - [x] Pre-populate form with patchValue()

- [x] **Task 3: Implement Update Submission** (AC: 4)
  - [x] Call trainingService.updateSession()
  - [x] Update Supabase and IndexedDB
  - [x] Set updated_at = now()
  - [x] Navigate to `/training/:id`
  - [x] Show success toast

- [x] **Task 4: Offline Handling** (AC: 5)
  - [x] Check network status
  - [x] Queue UPDATE operation if offline

- [x] **Task 5: Cancel Button** (AC: 6)
  - [x] Check form dirty state
  - [x] Show confirmation if dirty
  - [x] Navigate back

- [x] **Task 6: Write Tests** (AC: 7, 8)
  - [x] Unit test update logic
  - [x] E2E test edit and verify

## Dev Notes

Component reuse: TrainingFormComponent handles both create (Story 3.4) and edit (Story 3.8).

Detection:
```typescript
const id = this.route.snapshot.paramMap.get('id');
this.isEditMode = !!id;
```
[Source: PRD Epic 3 Story 3.8]

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-10-24 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
_To be populated by Dev Agent_

### Debug Log References
_To be populated by Dev Agent_

### Completion Notes List
_To be populated by Dev Agent_

### File List
_To be populated by Dev Agent_

## QA Results
_To be populated by QA Agent_
