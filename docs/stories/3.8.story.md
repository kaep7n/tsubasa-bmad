# Story 3.8: Edit Training Session

## Status
Ready

## Assigned To
James (Dev Agent)

## Story
**As a** coach,
**I want** to edit training session details,
**so that** I can correct mistakes or update information

## Acceptance Criteria
1. ✅ "Edit Session" button on training session detail screen
2. ✅ `EditTrainingSessionComponent` created (reuses form from CreateTrainingSessionComponent)
3. ✅ Form pre-populated with existing session data
4. ✅ On submit: Update session, navigate back, show toast
5. ✅ Offline handling: Form submission works offline
6. ✅ Cancel button: Navigate back without saving
7. ✅ Unit test: Verify update logic
8. ✅ E2E test: Edit session, verify changes saved

## Tasks / Subtasks

- [ ] **Task 1: Add Edit Button** (AC: 1)
  - [ ] Add edit button to training detail screen
  - [ ] Navigate to `/training/:id/edit`

- [ ] **Task 2: Setup Edit Mode in TrainingFormComponent** (AC: 2, 3)
  - [ ] Detect edit mode from route params
  - [ ] Load existing session data
  - [ ] Pre-populate form with patchValue()

- [ ] **Task 3: Implement Update Submission** (AC: 4)
  - [ ] Call trainingService.updateSession()
  - [ ] Update Supabase and IndexedDB
  - [ ] Set updated_at = now()
  - [ ] Navigate to `/training/:id`
  - [ ] Show success toast

- [ ] **Task 4: Offline Handling** (AC: 5)
  - [ ] Check network status
  - [ ] Queue UPDATE operation if offline

- [ ] **Task 5: Cancel Button** (AC: 6)
  - [ ] Check form dirty state
  - [ ] Show confirmation if dirty
  - [ ] Navigate back

- [ ] **Task 6: Write Tests** (AC: 7, 8)
  - [ ] Unit test update logic
  - [ ] E2E test edit and verify

## Dev Notes

Component reuse: TrainingFormComponent handles both create (Story 3.4) and edit (Story 3.8).

Detection:
```typescript
const id = this.route.snapshot.paramMap.get('id');
this.isEditMode = !!id;
```
[Source: PRD Epic 3 Story 3.8]

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-10-24 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
_To be populated by Dev Agent_

### Debug Log References
_To be populated by Dev Agent_

### Completion Notes List
_To be populated by Dev Agent_

### File List
_To be populated by Dev Agent_

## QA Results
_To be populated by QA Agent_
